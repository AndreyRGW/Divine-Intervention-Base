### Councillors ###
DI_martial_councillor = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_martial_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_court_character_effect = yes

				if = {
					limit = {
						exists = cp:councillor_marshal
					}
					fire_councillor = cp:councillor_marshal
				}
				assign_councillor_type = {
					type = councillor_marshal
					target = scope:new_courtier
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_court_character_effect = yes

			if = {
				limit = {
					exists = cp:councillor_marshal
				}
				fire_councillor = cp:councillor_marshal
			}
			assign_councillor_type = {
				type = councillor_marshal
				target = scope:new_courtier
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_diplomacy_councillor = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_diplomacy_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_court_character_effect = yes

				if = {
					limit = {
						exists = cp:councillor_chancellor
					}
					fire_councillor = cp:councillor_chancellor
				}
				assign_councillor_type = {
					type = councillor_chancellor
					target = scope:new_courtier
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_court_character_effect = yes

			if = {
				limit = {
					exists = cp:councillor_chancellor
				}
				fire_councillor = cp:councillor_chancellor
			}
			assign_councillor_type = {
				type = councillor_chancellor
				target = scope:new_courtier
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_stewardship_councillor = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_stewardship_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_court_character_effect = yes

				if = {
					limit = {
						exists = cp:councillor_steward
					}
					fire_councillor = cp:councillor_steward
				}
				assign_councillor_type = {
					type = councillor_steward
					target = scope:new_courtier
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_court_character_effect = yes

			if = {
				limit = {
					exists = cp:councillor_steward
				}
				fire_councillor = cp:councillor_steward
			}
			assign_councillor_type = {
				type = councillor_steward
				target = scope:new_courtier
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_intrigue_councillor = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_intrigue_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_court_character_effect = yes

				if = {
					limit = {
						exists = cp:councillor_spymaster
					}
					fire_councillor = cp:councillor_spymaster
				}
				assign_councillor_type = {
					type = councillor_spymaster
					target = scope:new_courtier
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_court_character_effect = yes

			if = {
				limit = {
					exists = cp:councillor_spymaster
				}
				fire_councillor = cp:councillor_spymaster
			}
			assign_councillor_type = {
				type = councillor_spymaster
				target = scope:new_courtier
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_learning_councillor = {
	scope = character

	effect = {
		save_scope_as = root_target
		DI_learning_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				if = {
					limit = {
						NOR = {
							faith = {
								has_doctrine_parameter = clerical_appointment_head_of_faith
								has_doctrine_parameter = clerical_appointment_fixed
							}
						}
					}
					DI_spawn_court_character_effect = yes

					if = {
						limit = {
							exists = cp:councillor_court_chaplain
						}
						fire_councillor = cp:councillor_court_chaplain
					}
					assign_councillor_type = {
						type = councillor_court_chaplain
						target = scope:new_courtier
					}
				}
				else_if = {
					limit = {
						exists = cp:councillor_court_chaplain
						cp:councillor_court_chaplain = {
							NOT = { has_character_flag = upgraded_chaplain }
						}
					}
					cp:councillor_court_chaplain = {
						custom_tooltip = improved_stats_effect_TT
						hidden_effect = {
							save_scope_as = new_courtier
							remove_health_conflict_effect = yes
							remove_education_traits_effect = yes
							clear_personality_traits_effect = yes
							add_martial_skill = 16
							add_prowess_skill = 16
							add_diplomacy_skill = 25
							add_stewardship_skill = 25
							add_intrigue_skill = 16
							add_learning_skill = 30
							add_character_flag = upgraded_chaplain
						}
					}
					scope:root_target = {
						every_in_list = {
							variable = DI_cs_trait_list
							scope:new_courtier = {
								add_trait = prev
							}
						}
					}
				}
			}
		}
		else = {
			save_scope_as = target

			if = {
				limit = {
					NOR = {
						faith = {
							has_doctrine_parameter = clerical_appointment_head_of_faith
							has_doctrine_parameter = clerical_appointment_fixed
						}
					}
				}
				DI_spawn_court_character_effect = yes

				if = {
					limit = {
						exists = cp:councillor_court_chaplain
					}
					fire_councillor = cp:councillor_court_chaplain
				}
				assign_councillor_type = {
					type = councillor_court_chaplain
					target = scope:new_courtier
				}
			}
			else_if = {
				limit = {
					exists = cp:councillor_court_chaplain
					cp:councillor_court_chaplain = {
						NOT = { has_character_flag = upgraded_chaplain }
					}
				}
				cp:councillor_court_chaplain = {
					custom_tooltip = improved_stats_effect_TT
					hidden_effect = {
						save_scope_as = new_courtier
						remove_health_conflict_effect = yes
						remove_education_traits_effect = yes
						clear_personality_traits_effect = yes
						add_martial_skill = 16
						add_prowess_skill = 16
						add_diplomacy_skill = 25
						add_stewardship_skill = 25
						add_intrigue_skill = 16
						add_learning_skill = 30
						add_character_flag = upgraded_chaplain
					}
				}

				scope:root_target = {
					every_in_list = {
						variable = DI_cs_trait_list
						scope:new_courtier = {
							add_trait = prev
						}
					}
				}
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

### COUNCILLOR MENU CONTINUED MISC ###
DI_knight = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_knight_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_court_character_effect = yes

				scope:new_courtier = {
					add_trait_xp = { trait = lifestyle_blademaster value = 100 }
					add_perk = stalwart_leader_perk
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_court_character_effect = yes

			scope:new_courtier = {
				add_trait_xp = { trait = lifestyle_blademaster value = 100 }
				add_perk = stalwart_leader_perk
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_commander = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_knight_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_court_character_effect = yes

				scope:new_courtier = {
					add_trait_xp = { trait = lifestyle_blademaster value = 100 }
					add_perk = stalwart_leader_perk
					add_commander_traits_effect = yes
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_court_character_effect = yes

			scope:new_courtier = {
				add_trait_xp = { trait = lifestyle_blademaster value = 100 }
				add_perk = stalwart_leader_perk
				add_commander_traits_effect = yes
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

### FAMILY ###
# parent
DI_parent = {
	scope = character

	effect = {
		save_scope_as = root_target

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_family_character_effect = yes

				if = {
					limit = {
						is_ruler = no
					}
					scope:target.liege = {
						add_courtier = scope:new_courtier
					}
				}
				if = {
					limit = {
						scope:root_target = {
							has_variable = DI_char_spawner_female
						}
					}
			
					scope:target = {
						every_sibling = {
							set_mother = scope:new_courtier
						}
						set_mother = scope:new_courtier
					}
				}
				else = {
					scope:target = {
						every_sibling = {
							set_father = scope:new_courtier
						}
						set_father = scope:new_courtier
					}
				}		
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_family_character_effect = yes

			if = {
				limit = {
					is_ruler = no
				}
				scope:target.liege = {
					add_courtier = scope:new_courtier
				}
			}
			if = {
				limit = {
					scope:root_target = {
						has_variable = DI_char_spawner_female
					}
				}
		
				scope:target = {
					every_sibling = {
						set_mother = scope:new_courtier
					}
					set_mother = scope:new_courtier
				}
			}
			else = {
				scope:target = {
					every_sibling = {
						set_father = scope:new_courtier
					}
					set_father = scope:new_courtier
				}
			}		
		}
	}
}

DI_child = {
	scope = character
	
	effect = {
		save_scope_as = root_target

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_set_parents_of_child_effect = yes
				DI_spawn_family_character_effect = yes

				if = {
					limit = {
						scope:root_target.var:DI_char_spawner_count_increment_value > 1
					}
					scope:new_courtier = {
						add_trait = twin
					}
				}
				if = {
					limit = {
						is_ruler = no
					}
					scope:target.liege = {
						add_courtier = scope:new_courtier
					}
				}
				
				scope:root_target.var:DI_cs_father ?= { DI_set_father_effect = yes }
				scope:root_target.var:DI_cs_mother ?= { DI_set_mother_effect = yes }	
			}
		}
		else = {
			save_scope_as = target

			DI_set_parents_of_child_effect = yes
			DI_spawn_family_character_effect = yes

			if = {
				limit = {
					scope:root_target.var:DI_char_spawner_count_increment_value > 1
				}
				scope:new_courtier = {
					add_trait = twin
				}
			}
			if = {
				limit = {
					is_ruler = no
				}
				scope:target.liege = {
					add_courtier = scope:new_courtier
				}
			}
			scope:root_target.var:DI_cs_father ?= { DI_set_father_effect = yes }
			scope:root_target.var:DI_cs_mother ?= { DI_set_mother_effect = yes }
		}
	}
}

DI_sibling = {
	scope = character
	
	effect = {
		save_scope_as = root_target

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_set_parents_of_sibling_effect = yes
				DI_spawn_family_character_effect = yes

				if = {
					limit = {
						scope:root_target.var:DI_char_spawner_count_increment_value > 1
					}
					scope:new_courtier = {
						add_trait = twin
					}
				}
				if = {
					limit = {
						is_ruler = no
					}
					scope:target.liege = {
						add_courtier = scope:new_courtier
					}
				}
				
				scope:root_target.var:DI_cs_father ?= { DI_set_father_effect = yes }
				scope:root_target.var:DI_cs_mother ?= { DI_set_mother_effect = yes }	
			}
		}
		else = {
			save_scope_as = target

			DI_set_parents_of_sibling_effect = yes
			DI_spawn_family_character_effect = yes

			if = {
				limit = {
					scope:root_target.var:DI_char_spawner_count_increment_value > 1
				}
				scope:new_courtier = {
					add_trait = twin
				}
			}
			if = {
				limit = {
					is_ruler = no
				}
				scope:target.liege = {
					add_courtier = scope:new_courtier
				}
			}
			scope:root_target.var:DI_cs_father ?= { DI_set_father_effect = yes }
			scope:root_target.var:DI_cs_mother ?= { DI_set_mother_effect = yes }
		}
	}
}


### COURT ###
DI_normal_courtier = {
	scope = character
	
	effect = {
		save_scope_as = root_target

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_court_character_effect = yes
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_court_character_effect = yes
		}
	}
}

DI_low_normal_courtier = {
	scope = character
	
	effect = {
		save_scope_as = root_target

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_low_court_character_effect = yes
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_low_court_character_effect = yes
		}
	}
}

### TODO ###
# Add an if statement that checks for the existence of a courtier of the same type
# If one exists, replace them with new_courtier, else appoint new_courtier

DI_court_physician = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_physician_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_low_court_character_effect = yes

				scope:new_courtier = {
					add_trait_xp = { trait = lifestyle_physician value = 100 }
					add_trait_xp = { trait = lifestyle_mystic value = 100 }
				}

				appoint_court_position = {
					recipient = scope:new_courtier
					court_position = court_physician_court_position
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_low_court_character_effect = yes

			scope:new_courtier = {
				add_trait_xp = { trait = lifestyle_physician value = 100 }
				add_trait_xp = { trait = lifestyle_mystic value = 100 }
			}

			appoint_court_position = {
				recipient = scope:new_courtier
				court_position = court_physician_court_position
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_court_antiquarian = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_antiquarian_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_low_court_character_effect = yes

				scope:new_courtier = {
					create_inspiration = book_inspiration
					inspiration = {
						change_inspiration_progress = 100
					}
				}

				appoint_court_position = {
					recipient = scope:new_courtier
					court_position = antiquarian_court_position
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_low_court_character_effect = yes

			scope:new_courtier = {
				create_inspiration = book_inspiration
				inspiration = {
					change_inspiration_progress = 100
				}
			}

			appoint_court_position = {
				recipient = scope:new_courtier
				court_position = antiquarian_court_position
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_travel_leader = {
	scope = character

	effect = {
		save_scope_as = root_target
		DI_travel_leader_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_low_court_character_effect = yes

				scope:new_courtier = {
					add_commander_traits_effect = yes
					add_trait_xp = {
						trait = lifestyle_traveler
						track = travel
						value = 100
					}
					add_trait_xp = {
						trait = lifestyle_traveler
						track = danger
						value = 100
					}
					learn_language = language_arabic
					learn_language = language_greek
					learn_language = language_latin
					learn_language = language_norse
				}

				appoint_court_position = {
					recipient = scope:new_courtier
					court_position = travel_leader_court_position
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_low_court_character_effect = yes

			scope:new_courtier = {
				add_commander_traits_effect = yes
				add_trait_xp = {
					trait = lifestyle_traveler
					track = travel
					value = 100
				}
				add_trait_xp = {
					trait = lifestyle_traveler
					track = danger
					value = 100
				}
				learn_language = language_arabic
				learn_language = language_greek
				learn_language = language_latin
				learn_language = language_norse
			}

			appoint_court_position = {
				recipient = scope:new_courtier
				court_position = travel_leader_court_position
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_court_tutor = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_court_tutor_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_low_court_character_effect = yes

				scope:new_courtier = {}

				appoint_court_position = {
					recipient = scope:new_courtier
					court_position = court_tutor_court_position
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_low_court_character_effect = yes

			scope:new_courtier = {}

			appoint_court_position = {
				recipient = scope:new_courtier
				court_position = court_tutor_court_position
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_master_of_hunt = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_master_of_hunt_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_low_court_character_effect = yes

				scope:new_courtier = {
					add_trait_xp = {
						trait = lifestyle_hunter
						track = hunter
						value = 100
					}
				}

				appoint_court_position = {
					recipient = scope:new_courtier
					court_position = master_of_hunt_court_position
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_low_court_character_effect = yes

			scope:new_courtier = {
				add_trait_xp = {
					trait = lifestyle_hunter
					track = hunter
					value = 100
				}
			}

			appoint_court_position = {
				recipient = scope:new_courtier
				court_position = master_of_hunt_court_position
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_seneschal = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_seneschal_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_low_court_character_effect = yes

				scope:new_courtier = {}

				appoint_court_position = {
					recipient = scope:new_courtier
					court_position = seneschal_court_position
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_low_court_character_effect = yes

			scope:new_courtier = {}

			appoint_court_position = {
				recipient = scope:new_courtier
				court_position = seneschal_court_position
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_court_jester = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_court_jester_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_low_court_character_effect = yes

				scope:new_courtier = {}

				appoint_court_position = {
					recipient = scope:new_courtier
					court_position = court_jester_court_position
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_low_court_character_effect = yes

			scope:new_courtier = {}

			appoint_court_position = {
				recipient = scope:new_courtier
				court_position = court_jester_court_position
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_bodyguard = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_bodyguard_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_low_court_character_effect = yes

				scope:new_courtier = {
					add_trait_xp = {
						trait = lifestyle_blademaster
						value = 100
					}
				}

				appoint_court_position = {
					recipient = scope:new_courtier
					court_position = bodyguard_court_position
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_low_court_character_effect = yes

			scope:new_courtier = {
				add_trait_xp = {
					trait = lifestyle_blademaster
					value = 100
				}
			}

			appoint_court_position = {
				recipient = scope:new_courtier
				court_position = bodyguard_court_position
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_champion = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_champion_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_low_court_character_effect = yes

				scope:new_courtier = {
					add_trait_xp = {
						trait = lifestyle_blademaster
						value = 100
					}
				}

				appoint_court_position = {
					recipient = scope:new_courtier
					court_position = champion_court_position
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_low_court_character_effect = yes

			scope:new_courtier = {
				add_trait_xp = {
					trait = lifestyle_blademaster
					value = 100
				}
			}

			appoint_court_position = {
				recipient = scope:new_courtier
				court_position = champion_court_position
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_court_lady_in_waiting = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender = female
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 3 6 }
							diplomacy = { 10 12 }
							stewardship = { 3 6 }
							intrigue = { 3 6 }
							learning = { 3 6 }
							random_traits_list = {
								count = 1
								education_diplomacy_3 = {}
								education_diplomacy_4 = {}
							}
							trait = just
							trait = gregarious
							trait = honest
							random_traits = yes
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender = female
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 3 6 }
						diplomacy = { 10 12 }
						stewardship = { 3 6 }
						intrigue = { 3 6 }
						learning = { 3 6 }
						random_traits_list = {
							count = 1
							education_diplomacy_3 = {}
							education_diplomacy_4 = {}
						}
						trait = just
						trait = gregarious
						trait = honest
						random_traits = yes
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_eunuch = {
	scope = character
	
	effect = {
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender = male
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 3 6 }
							diplomacy = { 10 12 }
							stewardship = { 3 6 }
							intrigue = { 17 20 }
							learning = { 3 6 }
							random_traits_list = {
								count = 1
								education_diplomacy_3 = {}
								education_diplomacy_4 = {}
							}
							trait = eunuch
							trait = gregarious
							trait = honest
							random_traits = yes
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender = male
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 3 6 }
						diplomacy = { 10 12 }
						stewardship = { 3 6 }
						intrigue = { 17 20 }
						learning = { 3 6 }
						random_traits_list = {
							count = 1
							education_diplomacy_3 = {}
							education_diplomacy_4 = {}
						}
						trait = eunuch
						trait = gregarious
						trait = honest
						random_traits = yes
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_cultural_emissary = {
	scope = character
	
	effect = {
		save_scope_as = root_target
		DI_cultural_emissary_traits_effect = yes

		if = {
			limit = {
				has_variable = DI_pinned_char_var
			}
			every_in_list = {
				variable = pinned_characters

				save_scope_as = target

				DI_spawn_low_court_character_effect = yes

				scope:new_courtier = {
					learn_language = language_arabic
					learn_language = language_greek
					learn_language = language_latin
					learn_language = language_norse
				}

				appoint_court_position = {
					recipient = scope:new_courtier
					court_position = cultural_emissary_court_position
				}
			}
		}
		else = {
			save_scope_as = target

			DI_spawn_low_court_character_effect = yes

			scope:new_courtier = {
				learn_language = language_arabic
				learn_language = language_greek
				learn_language = language_latin
				learn_language = language_norse
			}

			appoint_court_position = {
				recipient = scope:new_courtier
				court_position = cultural_emissary_court_position
			}
		}

		if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= no
			}
			DI_no_random_traits_effect = yes
		}
		else_if = {
			limit = {
				scope:root_target.var:DI_cs_random_traits ?= yes
			}
			DI_random_traits_effect = yes
		}
	}
}

DI_court_keeper_of_swans = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 3 6 }
							diplomacy = { 3 6 }
							stewardship = { 10 12 }
							intrigue = { 3 6 }
							learning = { 3 6 }
							random_traits_list = {
								count = 1
								education_stewardship_3 = {}
								education_stewardship_4 = {}
							}
							trait = just
							trait = gregarious
							trait = lifestyle_hunter
							random_traits = yes
							after_creation = {
								add_trait_xp = { trait = lifestyle_hunter track = hunter value = 100 }
							}
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 3 6 }
						diplomacy = { 3 6 }
						stewardship = { 10 12 }
						intrigue = { 3 6 }
						learning = { 3 6 }
						random_traits_list = {
							count = 1
							education_stewardship_3 = {}
							education_stewardship_4 = {}
						}
						trait = just
						trait = gregarious
						trait = lifestyle_hunter
						random_traits = yes
						after_creation = {
							add_trait_xp = { trait = lifestyle_hunter track = hunter value = 100 }
						}
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_chief_qadi = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 3 6 }
							diplomacy = { 3 6 }
							stewardship = { 10 12 }
							intrigue = { 3 6 }
							learning = { 3 6 }
							random_traits_list = {
								count = 1
								education_learning_3 = {}
								education_learning_4 = {}
							}
							trait = just
							trait = temperate
							trait = generous
							trait = scholar
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 3 6 }
						diplomacy = { 3 6 }
						stewardship = { 10 12 }
						intrigue = { 3 6 }
						learning = { 3 6 }
						random_traits_list = {
							count = 1
							education_learning_3 = {}
							education_learning_4 = {}
						}
						trait = just
						trait = temperate
						trait = generous
						trait = scholar
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_garuda = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 10 12 }
							prowess = { 10 12 }
							diplomacy = { 3 6 }
							stewardship = { 3 6 }
							intrigue = { 3 6 }
							learning = { 3 6 }
							random_traits_list = {
								count = 1
								education_martial_3 = {}
								education_martial_4 = {}
							}
							trait = lifestyle_blademaster
							random_traits = yes
							after_creation = {
								add_trait_xp = { trait = lifestyle_blademaster value = 100 }
							}	
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 10 12 }
						prowess = { 10 12 }
						diplomacy = { 3 6 }
						stewardship = { 3 6 }
						intrigue = { 3 6 }
						learning = { 3 6 }
						random_traits_list = {
							count = 1
							education_martial_3 = {}
							education_martial_4 = {}
						}
						trait = lifestyle_blademaster
						random_traits = yes
						after_creation = {
							add_trait_xp = { trait = lifestyle_blademaster value = 100 }
						}	
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_gardener = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 3 6 }
							diplomacy = { 3 6 }
							stewardship = { 10 12 }
							intrigue = { 3 6 }
							learning = { 3 6 }
							random_traits_list = {
								count = 1
								education_stewardship_3 = {}
								education_stewardship_4 = {}
							}
							trait = patient
							trait = lifestyle_herbalist
							trait = lifestyle_gardener
							random_traits = yes
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 3 6 }
						diplomacy = { 3 6 }
						stewardship = { 10 12 }
						intrigue = { 3 6 }
						learning = { 3 6 }
						random_traits_list = {
							count = 1
							education_stewardship_3 = {}
							education_stewardship_4 = {}
						}
						trait = patient
						trait = lifestyle_herbalist
						trait = lifestyle_gardener
						random_traits = yes
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_food_taster = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 3 6 }
							diplomacy = { 3 6 }
							stewardship = { 3 6 }
							intrigue = { 10 12 }
							learning = { 3 6 }
							random_traits_list = {
								count = 1
								education_intrigue_3 = {}
								education_intrigue_4 = {}
							}
							trait = gluttonous
							trait = comfort_eater
							trait = lifestyle_herbalist
							random_traits = yes
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 3 6 }
						diplomacy = { 3 6 }
						stewardship = { 3 6 }
						intrigue = { 10 12 }
						learning = { 3 6 }
						random_traits_list = {
							count = 1
							education_intrigue_3 = {}
							education_intrigue_4 = {}
						}
						trait = gluttonous
						trait = comfort_eater
						trait = lifestyle_herbalist
						random_traits = yes
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_master_of_horse = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 10 12 }
							prowess = { 10 12 }
							diplomacy = { 3 6 }
							stewardship = { 3 6 }
							intrigue = { 3 6 }
							learning = { 3 6 }
							random_traits_list = {
								count = 1
								education_martial_3 = {}
								education_martial_4 = {}
							}
							trait = overseer
							random_traits = yes
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 10 12 }
						prowess = { 10 12 }
						diplomacy = { 3 6 }
						stewardship = { 3 6 }
						intrigue = { 3 6 }
						learning = { 3 6 }
						random_traits_list = {
							count = 1
							education_martial_3 = {}
							education_martial_4 = {}
						}
						trait = overseer
						random_traits = yes
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_royal_architect = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 3 6 }
							diplomacy = { 3 6 }
							stewardship = { 10 12 }
							intrigue = { 3 6 }
							learning = { 3 6 }
							random_traits_list = {
								count = 1
								education_stewardship_3 = {}
								education_stewardship_4 = {}
							}
							trait = architect
							random_traits = yes
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 3 6 }
						diplomacy = { 3 6 }
						stewardship = { 10 12 }
						intrigue = { 3 6 }
						learning = { 3 6 }
						random_traits_list = {
							count = 1
							education_stewardship_3 = {}
							education_stewardship_4 = {}
						}
						trait = architect
						random_traits = yes
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_high_almoner = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 3 6 }
							diplomacy = { 3 6 }
							stewardship = { 3 6 }
							intrigue = { 3 6 }
							learning = { 10 12 }
							random_traits_list = {
								count = 1
								education_learning_3 = {}
								education_learning_4 = {}
							}
							trait = compassionate
							trait = generous
							random_traits = yes
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 3 6 }
						diplomacy = { 3 6 }
						stewardship = { 3 6 }
						intrigue = { 3 6 }
						learning = { 10 12 }
						random_traits_list = {
							count = 1
							education_learning_3 = {}
							education_learning_4 = {}
						}
						trait = compassionate
						trait = generous
						random_traits = yes
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_cupbearer = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 3 6 }
							diplomacy = { 10 12 }
							stewardship = { 3 6 }
							intrigue = { 3 6 }
							learning = { 3 6 }
							random_traits_list = {
								count = 1
								education_diplomacy_3 = {}
								education_diplomacy_4 = {}
							}
							trait = honest
							trait = trusting
							random_traits = yes
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 3 6 }
						diplomacy = { 10 12 }
						stewardship = { 3 6 }
						intrigue = { 3 6 }
						learning = { 3 6 }
						random_traits_list = {
							count = 1
							education_diplomacy_3 = {}
							education_diplomacy_4 = {}
						}
						trait = honest
						trait = trusting
						random_traits = yes
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_poet = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 3 6 }
							diplomacy = { 10 12 }
							stewardship = { 3 6 }
							intrigue = { 3 6 }
							learning = { 10 12 }
							random_traits_list = {
								count = 1
								education_diplomacy_3 = {}
								education_diplomacy_4 = {}
							}
							trait = gregarious
							trait = poet
							random_traits = yes
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 3 6 }
						diplomacy = { 10 12 }
						stewardship = { 3 6 }
						intrigue = { 3 6 }
						learning = { 10 12 }
						random_traits_list = {
							count = 1
							education_diplomacy_3 = {}
							education_diplomacy_4 = {}
						}
						trait = gregarious
						trait = poet
						random_traits = yes
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_musician = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 3 6 }
							diplomacy = { 10 12 }
							stewardship = { 3 6 }
							intrigue = { 3 6 }
							learning = { 10 12 }
							random_traits_list = {
								count = 1
								education_diplomacy_3 = {}
								education_diplomacy_4 = {}
							}
							trait = gregarious
							trait = poet
							random_traits = yes
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 3 6 }
						diplomacy = { 10 12 }
						stewardship = { 3 6 }
						intrigue = { 3 6 }
						learning = { 10 12 }
						random_traits_list = {
							count = 1
							education_diplomacy_3 = {}
							education_diplomacy_4 = {}
						}
						trait = gregarious
						trait = poet
						random_traits = yes
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_executioner = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 3 6 }
							prowess = { 10 12 }
							diplomacy = { 3 6 }
							stewardship = { 3 6 }
							intrigue = { 10 12 }
							learning = { 3 6 }
							random_traits_list = {
								count = 1
								education_intrigue_3 = {}
								education_intrigue_4 = {}
							}
							trait = torturer
							trait = sadistic
							
							
							random_traits = yes
							
							after_creation = {
								root = {
									add_hook_no_toast = { type = loyalty_hook target = prev}
								}
							}
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 3 6 }
						prowess = { 10 12 }
						diplomacy = { 3 6 }
						stewardship = { 3 6 }
						intrigue = { 10 12 }
						learning = { 3 6 }
						random_traits_list = {
							count = 1
							education_intrigue_3 = {}
							education_intrigue_4 = {}
						}
						trait = torturer
						trait = sadistic
						
						
						random_traits = yes
						
						after_creation = {
							root = {
								add_hook_no_toast = { type = loyalty_hook target = prev}
							}
						}
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}

DI_court_artificer = {
	scope = character
	
	effect = {
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}

			set_global_variable = {
				name = gender_var
				value = 100
			}
		}
		else = {
			set_global_variable = {
				name = gender_var
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = DI_char_spawner_female
			}
			set_global_variable = DI_char_spawner_female
		}
		else = {
			remove_global_variable = DI_char_spawner_female
		}
		
		set_global_variable = {
			name = age_var
			value = var:DI_char_spawner_age_increment_value
		}

		set_global_variable = {
			name = count_var
			value = var:DI_char_spawner_count_increment_value
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_immortal
			}
			set_global_variable = DI_char_spawner_immortal
		}
		else = {
			remove_global_variable = DI_char_spawner_immortal
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_100_stat_man
			}
			set_global_variable = DI_char_spawner_100_stat_man
		}
		else = {
			remove_global_variable = DI_char_spawner_100_stat_man
		}

		if = {
			limit = {
				has_variable = DI_char_spawner_good_traits
			}
			set_global_variable = DI_char_spawner_good_traits
		}
		else = {
			remove_global_variable = DI_char_spawner_good_traits
		}
		
		while = { count = var:DI_char_spawner_count_increment_value
			if = {
				limit = {
					has_variable = DI_pinned_char_var
				}
				
				every_living_character = {
					limit = { has_character_flag = pinned_for_edit }
					
					hidden_effect = {
						save_scope_as = target

						create_character = {
							age = global_var:age_var
							gender_female_chance = global_var:gender_var
							health = 5
							fertility = 0.5
							employer = scope:target
							faith = scope:target.faith
							culture = scope:target.culture
							dynasty = none
							martial = { 15 17 }
							prowess = { 15 17 }
							diplomacy = { 15 17 }
							stewardship = { 15 17 }
							intrigue = { 15 17 }
							learning = { 15 17 }
							random_traits_list = {
								count = 1
								education_stewardship_3 = {}
								education_stewardship_4 = {}
							}
							
							
							random_traits = yes
							after_creation = {
								create_inspiration = { type = weapon_inspiration }
							}
							save_scope_as = new_courtier
						}
						scope:target = {
							if = {
								limit = {
									has_global_variable = DI_char_spawner_immortal
								}
								scope:new_courtier = {
									add_trait = immortal
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_100_stat_man
								}
								scope:new_courtier = {
									add_trait = 100_stat_man
								}
							}
							if = {
								limit = {
									has_global_variable = DI_char_spawner_good_traits
								}
								scope:new_courtier = {
									add_trait = loyal
									add_trait = beauty_good_3
									add_trait = intellect_good_3
									add_trait = physique_good_3
								}
							}
						}
					}
				}
			}
			else = {
				hidden_effect = {
					save_scope_as = target
				
					create_character = {
						age = global_var:age_var
						gender_female_chance = global_var:gender_var
						health = 5
						fertility = 0.5
						employer = scope:target
						faith = scope:target.faith
						culture = scope:target.culture
						dynasty = none
						martial = { 15 17 }
						prowess = { 15 17 }
						diplomacy = { 15 17 }
						stewardship = { 15 17 }
						intrigue = { 15 17 }
						learning = { 15 17 }
						random_traits_list = {
							count = 1
							education_stewardship_3 = {}
							education_stewardship_4 = {}
						}
						
						
						random_traits = yes
						after_creation = {
							create_inspiration = { type = weapon_inspiration }
						}
						save_scope_as = new_courtier
					}
					scope:target = {
						if = {
							limit = {
								has_global_variable = DI_char_spawner_immortal
							}
							scope:new_courtier = {
								add_trait = immortal
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_100_stat_man
							}
							scope:new_courtier = {
								add_trait = 100_stat_man
							}
						}
						if = {
							limit = {
								has_global_variable = DI_char_spawner_good_traits
							}
							scope:new_courtier = {
								add_trait = loyal
								add_trait = beauty_good_3
								add_trait = intellect_good_3
								add_trait = physique_good_3
							}
						}
					}
				}
			}
		}
	}
}